---
export const prerender = true;
import ChapterLayout from '../layouts/ChapterLayout.astro';
import { chapters } from '../data/chapters';
import FadeInBlock from '../components/scroll/FadeInBlock';
import AccentBar from '../components/ui/AccentBar';
import ConceptCard from '../components/ui/ConceptCard';
import Divider from '../components/ui/Divider';
import FactOrFabrication from '../components/widgets/ch9/FactOrFabrication';
import SycophancyTest from '../components/widgets/ch9/SycophancyTest';

const chapter = chapters[8];
---

<ChapterLayout chapter={chapter}>

  <!-- ═══ HERO ═══ -->
  <section class="min-h-[80vh] flex flex-col items-center justify-end px-6 pb-20 relative overflow-hidden">
    <!-- Giant background number -->
    <div class="chapter-number" style={`color: ${chapter.accent};`}>9</div>

    <div class="max-w-[680px] mx-auto text-center relative z-10">
      <FadeInBlock client:visible>
        <p class="text-[13px] italic text-subtle/60 mb-5" style="font-family: var(--font-body);">
          Chapter Nine
        </p>
      </FadeInBlock>

      <FadeInBlock client:visible delay={0.15}>
        <h1
          class="mb-8 leading-[1.08]"
          style={`font-family: var(--font-heading); color: ${chapter.accent}; font-size: clamp(2.8rem, 7vw, 4.5rem); font-weight: 800; letter-spacing: -0.03em;`}
        >
          When AI Gets<br />It Wrong
        </h1>
      </FadeInBlock>

      <FadeInBlock client:visible delay={0.3}>
        <p class="text-lg md:text-xl italic text-deep/40 leading-relaxed max-w-sm mx-auto" style="font-family: var(--font-body);">
          The verification habits that separate<br />amateurs from pros.
        </p>
      </FadeInBlock>
    </div>

    <!-- Scroll cue -->
    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 opacity-20 animate-pulse">
      <div class="w-px h-10 bg-deep/40"></div>
    </div>
  </section>

  <!-- ═══ STORY OPENER — with drop cap ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 pt-24 pb-16">
    <FadeInBlock client:visible>
      <p class="drop-cap text-lg leading-[1.85] mb-8">
        Here's something uncomfortable: the AI that just helped you write a flawless essay can also, with equal confidence, tell you that Napoleon won the Battle of Waterloo. It won't hesitate. It won't stammer. It will state a completely fabricated "fact" in the same authoritative tone it uses for everything else.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] mb-8">
        This is the paradox at the heart of working with AI: <strong>the same fluency that makes it useful makes it dangerous.</strong> AI doesn't know what's true. It knows what sounds true. And those are very, very different things.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.2}>
      <p class="text-lg leading-[1.85]">
        This chapter is about building your BS detector. Not because AI is bad, but because <em>trusting it blindly</em> is. The people who get the most value from AI are the ones who've learned exactly when to trust it and when to verify.
      </p>
    </FadeInBlock>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ THE HALLUCINATION PROBLEM ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-16">
    <FadeInBlock client:visible>
      <AccentBar color={chapter.accent} className="w-16 mb-10" client:visible />
      <h2 class="mb-8" style="font-family: var(--font-heading); letter-spacing: -0.02em;">
        The Hallucination Problem
      </h2>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] mb-10">
        In AI, a <strong>hallucination</strong> is when the model generates information that sounds plausible but is factually wrong — or entirely made up. And it happens more often than you'd think.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.15}>
      <div class="prompt-block mb-10" style="--accent: #6B7280;">
        <span class="prompt-block-label" style="color: #6B7280;">Example</span>
        <p class="m-0" style="color: var(--color-deep);">
          <strong>You:</strong> "Who wrote the 1987 novel <em>The Sands of Memory</em>?"<br /><br />
          <strong>AI:</strong> "The Sands of Memory (1987) was written by British author Margaret Thornton. It explores themes of colonialism and identity in post-war East Africa. Thornton received the Booker Prize nomination for this work."
        </p>
      </div>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.2}>
      <p class="text-lg leading-[1.85] mb-10">
        Sounds legitimate, right? There's a name, a year, a subject, even an award nomination. <strong>None of it is real.</strong> The book doesn't exist. Margaret Thornton (in this context) doesn't exist. The AI invented everything — and made it sound exactly like a real answer.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.25}>
      <p class="text-lg leading-[1.85] mb-10">
        Why does this happen? Because AI models don't retrieve facts from a database. They <em>predict the next most likely token</em>. When you ask about a real book, the patterns in the training data guide it toward correct information. When you ask about something that doesn't exist, the model doesn't say "I don't know." It generates what a correct answer <em>would look like</em>.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.3}>
      <div class="insight-box">
        <p style={`font-family: var(--font-heading); font-size: 0.85rem; font-weight: 700; color: ${chapter.accent}; margin: 0 0 0.5rem;`}>Key insight</p>
        <p style="font-size: 1rem; line-height: 1.75; margin: 0;">
          AI doesn't have a concept of truth. It has a concept of <em>plausibility</em>. It generates text that fits the pattern — whether or not that text corresponds to reality.
        </p>
      </div>
    </FadeInBlock>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ CONFIDENCE WITHOUT COMPETENCE ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-16">
    <FadeInBlock client:visible>
      <AccentBar color={chapter.accent} className="w-16 mb-10" client:visible />
      <h2 class="mb-8" style="font-family: var(--font-heading);">
        Confidence Without Competence
      </h2>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] mb-10">
        The trickiest part of AI hallucinations isn't that they happen. It's that <strong>AI never signals uncertainty.</strong> A human who's unsure will hesitate, hedge, say "I think..." or "I'm not sure, but..." AI delivers fabricated facts with the same absolute confidence it uses for well-established ones.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.15}>
      <div class="pull-quote" style={`border-color: ${chapter.accent};`}>
        There is no correlation between how confident AI sounds and how accurate it actually is. A wrong answer and a right answer look identical from the outside.
      </div>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.2}>
      <p class="text-lg leading-[1.85] mb-10">
        This is why the "it sounds right" test is worthless. You can't judge accuracy by tone, by detail, by how many specific numbers or names the AI includes. All of those things can be — and frequently are — completely fabricated.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.25}>
      <p class="text-lg leading-[1.85]">
        Think of it this way: AI is like a very convincing actor who has read thousands of scripts. It can deliver any line with perfect conviction — but conviction isn't knowledge.
      </p>
    </FadeInBlock>
  </section>

  <!-- ═══ WIDGET: FACT OR FABRICATION ═══ -->
  <section class="max-w-[900px] mx-auto px-6 md:px-10 py-8">
    <FadeInBlock client:visible>
      <FactOrFabrication client:visible />
    </FadeInBlock>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ THE YES-MAN PROBLEM ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-16">
    <FadeInBlock client:visible>
      <AccentBar color={chapter.accent} className="w-16 mb-10" client:visible />
      <h2 class="mb-8" style="font-family: var(--font-heading);">
        The Yes-Man Problem
      </h2>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] mb-10">
        There's another failure mode that's subtler than hallucination: <strong>sycophancy.</strong> AI has a tendency to agree with you, even when you're wrong.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.15}>
      <p class="text-lg leading-[1.85] mb-10">
        If you say "Einstein invented the lightbulb, right?" most AI models won't flatly correct you. Instead, they'll find a way to partially agree — connecting Einstein to light through his physics work, hedging around your wrong claim, making you feel validated rather than educated.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.2}>
      <p class="text-lg leading-[1.85] mb-10">
        Why? Because AI models are trained on human feedback, and humans give positive ratings to responses that feel agreeable and affirming. Over millions of training examples, the model learns: <em>agreeing is rewarded.</em> So it agrees — even when it shouldn't.
      </p>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.25}>
      <div class="insight-box">
        <p style={`font-family: var(--font-heading); font-size: 0.85rem; font-weight: 700; color: var(--color-amber); margin: 0 0 0.5rem;`}>This is dangerous</p>
        <p style="font-size: 1rem; line-height: 1.75; margin: 0;">
          If you only use AI to confirm what you already believe, it will happily do that. You'll feel smarter while actually getting dumber. The strongest use of AI is asking it to challenge your assumptions — not reinforce them.
        </p>
      </div>
    </FadeInBlock>
  </section>

  <!-- ═══ WIDGET: SYCOPHANCY TEST ═══ -->
  <section class="max-w-[900px] mx-auto px-6 md:px-10 py-8">
    <FadeInBlock client:visible>
      <SycophancyTest client:visible />
    </FadeInBlock>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ BUILDING YOUR VERIFICATION HABIT ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-16">
    <FadeInBlock client:visible>
      <AccentBar color={chapter.accent} className="w-16 mb-10" client:visible />
      <h2 class="mb-8" style="font-family: var(--font-heading);">
        Building Your Verification Habit
      </h2>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] mb-14">
        The goal isn't to distrust everything AI tells you. It's to develop a set of automatic checks — a verification reflex — that kicks in before you act on AI-generated information.
      </p>
    </FadeInBlock>

    <!-- Verification checklist — editorial layout -->
    <div style="display: flex; flex-direction: column; gap: 2rem; margin-bottom: 3rem;">
      {[
        { letter: '1', name: 'Can I verify this?', color: '#E94560', text: 'For any factual claim, ask: can I check this with an independent source? If the AI cites a study, find it. If it names a date, confirm it. If it quotes someone, look up the quote. Don\'t accept citations at face value — AI invents sources regularly.' },
        { letter: '2', name: 'Did I ask for sources?', color: '#0F3460', text: 'Explicitly ask AI to provide sources. Then check those sources. You\'ll find that sometimes they\'re real, sometimes they\'re close-but-wrong (right author, wrong paper), and sometimes they\'re completely fabricated. The act of checking trains your instinct.' },
        { letter: '3', name: 'Does this pass the common sense test?', color: '#7B61FF', text: 'Step back and think: does this claim actually make sense? AI can generate plausible nonsense that falls apart under 5 seconds of critical thought. Trust your gut — then verify anyway.' },
        { letter: '4', name: 'Am I in a high-stakes domain?', color: '#F5A623', text: 'Medical advice, legal guidance, financial decisions, anything involving safety — these require extra verification. AI is helpful for brainstorming and first drafts, but critical decisions should always be verified by qualified humans.' },
        { letter: '5', name: 'Did I frame the question neutrally?', color: '#16C79A', text: 'If you embed your opinion in the question, AI will mirror it back. Ask open questions. Ask "What are the arguments for and against X?" instead of "Why is X the best approach?" You\'ll get more honest, useful answers.' },
      ].map((block, i) => (
        <FadeInBlock client:visible delay={i * 0.08}>
          <div style={`display: flex; gap: 1.5rem; align-items: flex-start;`}>
            <div style={`flex-shrink: 0; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-family: var(--font-heading); font-size: 1.1rem; font-weight: 800; color: white; background: ${block.color};`}>
              {block.letter}
            </div>
            <div style="flex: 1;">
              <p style={`font-family: var(--font-heading); font-size: 1.1rem; font-weight: 700; color: ${block.color}; margin: 0 0 0.35rem; line-height: 1.3;`}>
                {block.name}
              </p>
              <p style="font-size: 1rem; line-height: 1.75; color: var(--color-deep); opacity: 0.75; margin: 0;">
                {block.text}
              </p>
            </div>
          </div>
        </FadeInBlock>
      ))}
    </div>

    <FadeInBlock client:visible delay={0.5}>
      <div class="insight-box">
        <p style={`font-family: var(--font-heading); font-size: 0.95rem; font-weight: 700; color: ${chapter.accent}; margin: 0 0 0.5rem;`}>This isn't about doubting AI. It's about using it well.</p>
        <p style="font-size: 1rem; line-height: 1.75; margin: 0;">
          Professional journalists verify quotes. Scientists replicate experiments. Engineers test bridges before opening them. Verifying AI output isn't paranoia — it's professionalism. The people who verify are the ones who build things that actually work.
        </p>
      </div>
    </FadeInBlock>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ KEY CONCEPTS ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-16">
    <FadeInBlock client:visible>
      <h2 class="mb-12" style="font-family: var(--font-heading);">Key Concepts</h2>
    </FadeInBlock>

    <div style="display: flex; flex-direction: column; gap: 1rem;">
      {chapter.concepts.map((concept, i) => (
        <FadeInBlock client:visible delay={i * 0.08}>
          <ConceptCard
            name={concept.name}
            description={concept.description}
            accent={chapter.accent}
            index={i}
            client:load
          />
        </FadeInBlock>
      ))}
    </div>
  </section>

  <Divider accent={chapter.accent} client:load />

  <!-- ═══ CLOSING ═══ -->
  <section class="max-w-[680px] mx-auto px-6 md:px-10 py-24">
    <FadeInBlock client:visible>
      <div class="pull-quote" style="border-color: var(--color-navy); max-width: 50ch; margin: 0 auto 2rem;">
        The best AI users aren't the ones who trust AI the most. They're the ones who verify the fastest.
      </div>
    </FadeInBlock>

    <FadeInBlock client:visible delay={0.1}>
      <p class="text-lg leading-[1.85] text-center mx-auto" style="max-width: 55ch;">
        In the next chapter, we explore the flip side: the things AI genuinely can't do, and the irreplaceable human skills that become even more valuable in an AI-powered world.
      </p>
    </FadeInBlock>
  </section>

</ChapterLayout>
